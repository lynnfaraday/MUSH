think [setq(0,install_aliasdb(ICTIME_CMD))][iter(FUN_AGE FUN_BIRTHDATE FUN_GET_AGE FUN_GET_BIRTHDATE FUN_ICDATE_TO_SECS FUN_IC_YEAR_TO_RL_YEAR FUN_OFFSET_ICDATE_YEAR FUN_OFFSET_IC_SECS FUN_RANDOM_BIRTHDATE FUN_RL_SECS_TO_IC_SECS FUN_RL_YEAR_TO_IC_YEAR FUN_ICTIME RATIO STARTSECS START_SECS DATE_OFFSET FUN_SECS_TO_ICDATE,switch(hasattr(%q0,##),1,[set(%q0,OLD_##:[xget(%q0,##)])][wipe(%q0/##)]))][set(%q0,FUN_ICTIME:\[timefmt($a $b $d)\]\\\, \[sub(last(time()),v(YEAR_OFFSET))\])]

+jobs/create CODE/IC Time Upgrade=The old IC Time system was scrapped due to a design flaw (related to a math limit in PennMUSH) that caused problems handling dates and ages too far from the current time.  In its place is a new, simpler IC Time.  This version does not support time ratios or offsets, but does allow a simple year offset.%R%RAll old attributes on the IC time system are archived with names like OLD_xxx.  If all you needed was a year offset, you should be good to go.  Otherwise your coder might have to tweak things.%R%RIf you wish to downgrade to the 7.0 version of IC time, you may certainly do so, but just be aware that it has limitations and is no longer supported.  Apologies for any inconvenience.

+jobs/create CODE/Adjust Birthdates=The new IC Time system tracks birthdates relative to *the current RL year*.  In other words: whether your game is set in 1866 or 2696, a character who's 23 years old will have a birthdate of 1990, because that's 23 years from 2013.%R%RAssuming you are keeping the new IC time system, you'll need to adjust the birthdates of all existing characters.%R%RA command has been created on whoever installed this system to help with this conversion.  The command is:%R%R+update81ages <current IC year>/<list of month names or abbreviations matching what was in your old birthdates>%R%RFor example:  +update81ages 1866/Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec%R%RExecute this to automatically update everyone's ages.  The old birthdates will be archived in an OLD_BIRTHDATE attr on each player for reference.

&CMD-+UPDATE81AGES me=$+update81ages */*:think iter(real_players(),[setq(0,xget(##,birthdate))][switch(t(%q0),1,[set(##,old_birthdate:%q0)][setq(1,match(%1,first(%q0)))][setq(2,sub(%0,last(%q0)))][setq(3,sub(last(time()),%q2))] [switch(%q1,0,ansi(hr,ERROR converting ##'s birthdate.   Please check it manually.))] [set(##,new_birthdate:[rjust(%q1,2,0)]/[before(rest(%q0),\,)]/%q3)])